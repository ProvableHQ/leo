program test.aleo;

closure reverse_bits:
    input r0 as u8;
    gt r0 0u8 into r1;
    and r0 1u8 into r2;
    is.eq r2 1u8 into r3;
    ternary r3 1u8 0u8 into r4;
    shr r0 1u8 into r5;
    ternary r1 r4 0u8 into r6;
    ternary r1 r5 r0 into r7;
    gt r7 0u8 into r8;
    shl r6 1u8 into r9;
    and r7 1u8 into r10;
    is.eq r10 1u8 into r11;
    xor r9 1u8 into r12;
    ternary r11 r12 r9 into r13;
    shr r7 1u8 into r14;
    ternary r8 r13 r6 into r15;
    ternary r8 r14 r7 into r16;
    gt r16 0u8 into r17;
    shl r15 1u8 into r18;
    and r16 1u8 into r19;
    is.eq r19 1u8 into r20;
    xor r18 1u8 into r21;
    ternary r20 r21 r18 into r22;
    shr r16 1u8 into r23;
    ternary r17 r22 r15 into r24;
    ternary r17 r23 r16 into r25;
    gt r25 0u8 into r26;
    shl r24 1u8 into r27;
    and r25 1u8 into r28;
    is.eq r28 1u8 into r29;
    xor r27 1u8 into r30;
    ternary r29 r30 r27 into r31;
    shr r25 1u8 into r32;
    ternary r26 r31 r24 into r33;
    ternary r26 r32 r25 into r34;
    gt r34 0u8 into r35;
    shl r33 1u8 into r36;
    and r34 1u8 into r37;
    is.eq r37 1u8 into r38;
    xor r36 1u8 into r39;
    ternary r38 r39 r36 into r40;
    shr r34 1u8 into r41;
    ternary r35 r40 r33 into r42;
    ternary r35 r41 r34 into r43;
    gt r43 0u8 into r44;
    shl r42 1u8 into r45;
    and r43 1u8 into r46;
    is.eq r46 1u8 into r47;
    xor r45 1u8 into r48;
    ternary r47 r48 r45 into r49;
    shr r43 1u8 into r50;
    ternary r44 r49 r42 into r51;
    ternary r44 r50 r43 into r52;
    gt r52 0u8 into r53;
    shl r51 1u8 into r54;
    and r52 1u8 into r55;
    is.eq r55 1u8 into r56;
    xor r54 1u8 into r57;
    ternary r56 r57 r54 into r58;
    shr r52 1u8 into r59;
    ternary r53 r58 r51 into r60;
    ternary r53 r59 r52 into r61;
    gt r61 0u8 into r62;
    shl r60 1u8 into r63;
    and r61 1u8 into r64;
    is.eq r64 1u8 into r65;
    xor r63 1u8 into r66;
    ternary r65 r66 r63 into r67;
    shr r61 1u8 into r68;
    ternary r62 r67 r60 into r69;
    output r69 as u8;

function fibonacci:
    input r0 as u8.public;
    lte r0 64u8 into r1;
    assert.eq r1 true;
    call reverse_bits r0 into r2;
    gt r0 0u8 into r3;
    and r2 1u8 into r4;
    is.eq r4 0u8 into r5;
    ternary r5 0u128 1u128 into r6;
    ternary r5 1u128 1u128 into r7;
    shr r0 1u8 into r8;
    ternary r3 r6 0u128 into r9;
    ternary r3 r7 1u128 into r10;
    ternary r3 1u8 0u8 into r11;
    ternary r3 r8 r0 into r12;
    gt r12 0u8 into r13;
    mul r10 r10 into r14;
    mul r9 r9 into r15;
    add r14 r15 into r16;
    mul 2u128 r10 into r17;
    sub r17 r9 into r18;
    mul r9 r18 into r19;
    shl 1u8 r11 into r20;
    and r2 r20 into r21;
    is.eq r21 0u8 into r22;
    add r19 r16 into r23;
    ternary r22 r19 r16 into r24;
    ternary r22 r16 r23 into r25;
    add r11 1u8 into r26;
    shr r12 1u8 into r27;
    ternary r13 r24 r9 into r28;
    ternary r13 r25 r10 into r29;
    ternary r13 r26 r11 into r30;
    ternary r13 r27 r12 into r31;
    gt r31 0u8 into r32;
    mul r29 r29 into r33;
    mul r28 r28 into r34;
    add r33 r34 into r35;
    mul 2u128 r29 into r36;
    sub r36 r28 into r37;
    mul r28 r37 into r38;
    shl 1u8 r30 into r39;
    and r2 r39 into r40;
    is.eq r40 0u8 into r41;
    add r38 r35 into r42;
    ternary r41 r38 r35 into r43;
    ternary r41 r35 r42 into r44;
    add r30 1u8 into r45;
    shr r31 1u8 into r46;
    ternary r32 r43 r28 into r47;
    ternary r32 r44 r29 into r48;
    ternary r32 r45 r30 into r49;
    ternary r32 r46 r31 into r50;
    gt r50 0u8 into r51;
    mul r48 r48 into r52;
    mul r47 r47 into r53;
    add r52 r53 into r54;
    mul 2u128 r48 into r55;
    sub r55 r47 into r56;
    mul r47 r56 into r57;
    shl 1u8 r49 into r58;
    and r2 r58 into r59;
    is.eq r59 0u8 into r60;
    add r57 r54 into r61;
    ternary r60 r57 r54 into r62;
    ternary r60 r54 r61 into r63;
    add r49 1u8 into r64;
    shr r50 1u8 into r65;
    ternary r51 r62 r47 into r66;
    ternary r51 r63 r48 into r67;
    ternary r51 r64 r49 into r68;
    ternary r51 r65 r50 into r69;
    gt r69 0u8 into r70;
    mul r67 r67 into r71;
    mul r66 r66 into r72;
    add r71 r72 into r73;
    mul 2u128 r67 into r74;
    sub r74 r66 into r75;
    mul r66 r75 into r76;
    shl 1u8 r68 into r77;
    and r2 r77 into r78;
    is.eq r78 0u8 into r79;
    add r76 r73 into r80;
    ternary r79 r76 r73 into r81;
    ternary r79 r73 r80 into r82;
    add r68 1u8 into r83;
    shr r69 1u8 into r84;
    ternary r70 r81 r66 into r85;
    ternary r70 r82 r67 into r86;
    ternary r70 r83 r68 into r87;
    ternary r70 r84 r69 into r88;
    gt r88 0u8 into r89;
    mul r86 r86 into r90;
    mul r85 r85 into r91;
    add r90 r91 into r92;
    mul 2u128 r86 into r93;
    sub r93 r85 into r94;
    mul r85 r94 into r95;
    shl 1u8 r87 into r96;
    and r2 r96 into r97;
    is.eq r97 0u8 into r98;
    add r95 r92 into r99;
    ternary r98 r95 r92 into r100;
    ternary r98 r92 r99 into r101;
    add r87 1u8 into r102;
    shr r88 1u8 into r103;
    ternary r89 r100 r85 into r104;
    ternary r89 r101 r86 into r105;
    ternary r89 r102 r87 into r106;
    ternary r89 r103 r88 into r107;
    gt r107 0u8 into r108;
    mul r105 r105 into r109;
    mul r104 r104 into r110;
    add r109 r110 into r111;
    mul 2u128 r105 into r112;
    sub r112 r104 into r113;
    mul r104 r113 into r114;
    shl 1u8 r106 into r115;
    and r2 r115 into r116;
    is.eq r116 0u8 into r117;
    add r114 r111 into r118;
    ternary r117 r114 r111 into r119;
    ternary r117 r111 r118 into r120;
    add r106 1u8 into r121;
    shr r107 1u8 into r122;
    ternary r108 r119 r104 into r123;
    ternary r108 r120 r105 into r124;
    ternary r108 r121 r106 into r125;
    ternary r108 r122 r107 into r126;
    gt r126 0u8 into r127;
    mul r124 r124 into r128;
    mul r123 r123 into r129;
    add r128 r129 into r130;
    mul 2u128 r124 into r131;
    sub r131 r123 into r132;
    mul r123 r132 into r133;
    shl 1u8 r125 into r134;
    and r2 r134 into r135;
    is.eq r135 0u8 into r136;
    add r133 r130 into r137;
    ternary r136 r133 r130 into r138;
    add r125 1u8 into r139;
    shr r126 1u8 into r140;
    ternary r127 r138 r123 into r141;
    output r141 as u128.private;
