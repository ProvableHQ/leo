namespace = "Compile"
expectation = "Pass"
outputs = [[{ compile = [
    { initial_ast = "c4b12b825683a5b6bdab0c3a0675c0f476e08c10e5af2a2372f0156c5004986b", unrolled_ast = "c4b12b825683a5b6bdab0c3a0675c0f476e08c10e5af2a2372f0156c5004986b", ssa_ast = "e26e811c32f4c15857fa80d4e5aac531d03c9323124a685bf2fc0f56f6b1dccd", flattened_ast = "e06a6c2735788516b22b7864ff6aaeac0e6860accc5a38c88ec8be6465fff69c", destructured_ast = "815149d6c8827e93f6e4e244efd1b1e6125c1fbe08495f7b4653a6afa8864ddf", inlined_ast = "0caa8c78ef26ed4387c55fb1f51a4917a22246b23eb210ca7a86694a2bee1be4", dce_ast = "0caa8c78ef26ed4387c55fb1f51a4917a22246b23eb210ca7a86694a2bee1be4", bytecode = """
program registry.aleo;

mapping users:
    key as address.public;
    value as boolean.public;

function register:
    async register self.caller into r0;
    output r0 as registry.aleo/register.future;

finalize register:
    input r0 as address.public;
    set true into users[r0];

function unregister:
    async unregister self.caller into r0;
    output r0 as registry.aleo/unregister.future;

finalize unregister:
    input r0 as address.public;
    set false into users[r0];
""", errors = "", warnings = "" },
    { initial_ast = "e6e054b30b86f4f8e55738568064aca7c155e48a3e77675d12e7624db6922df1", unrolled_ast = "095f7aef147685a0440d8f99a98368e81e061cb787513facbcfec074bffe3e95", ssa_ast = "23589c06492bf5cc7bd01720847a745d86439b69e87bc7c007025c15b88a96b0", flattened_ast = "59527e78204df58894487bcc3083799ff2b7faf38dec736fd33aa95ed7cb01ef", destructured_ast = "227c7e0c046e20410601a231b760d507e64a6426f271dc1d07bbcf896d89b5ac", inlined_ast = "b17a3c47decfcc51d5040391249f0e41259bef41cd4f877b10748deedc86ce1f", dce_ast = "b17a3c47decfcc51d5040391249f0e41259bef41cd4f877b10748deedc86ce1f", bytecode = """
import registry.aleo;
program relay.aleo;

record message:
    owner as address.private;
    data as u8.private;

mapping users:
    key as address.public;
    value as boolean.public;

function send:
    input r0 as address.private;
    input r1 as u8.private;
    cast r0 r1 into r2 as message.record;
    async send r0 into r3;
    output r2 as message.record;
    output r3 as relay.aleo/send.future;

finalize send:
    input r0 as address.public;
    get registry.aleo/users[r0] into r1;
    assert.eq r1 true;

function send_without_check:
    input r0 as address.private;
    input r1 as u8.private;
    cast r0 r1 into r2 as message.record;
    async send_without_check r0 into r3;
    output r2 as message.record;
    output r3 as relay.aleo/send_without_check.future;

finalize send_without_check:
    input r0 as address.public;
    get.or_use registry.aleo/users[r0] true into r1;
    assert.eq r1 true;
""", errors = "", warnings = "" },
] }]]
