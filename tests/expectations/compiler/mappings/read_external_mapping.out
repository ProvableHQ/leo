namespace = "Compile"
expectation = "Pass"
outputs = [[{ compile = [
    { initial_ast = "f2aaf1996d382c7333a733e4be37ea93c27a3ec58960af996b9f8645ebd27dcf", unrolled_ast = "f2aaf1996d382c7333a733e4be37ea93c27a3ec58960af996b9f8645ebd27dcf", ssa_ast = "16bbfc985f7b340af00f48be7c87cce9fa9deec2517f8e1e51d0a9b90a54fd52", flattened_ast = "61ebe1a4cbc0e2aa7543f9349ff29a49880ff26be94a40ff5e9b814d9e492754", destructured_ast = "1791c96b6082616af5322ea9be10c408ec63157577ee38a41ae05f57ba96fffe", inlined_ast = "87b1222d16e2831b7cf5a6007bf34c420c4fb845e80a5fe552931b2a5ce9756b", dce_ast = "87b1222d16e2831b7cf5a6007bf34c420c4fb845e80a5fe552931b2a5ce9756b", bytecode = """
program registry.aleo;

mapping users:
    key as address.public;
    value as boolean.public;

function register:
    async register self.caller into r0;
    output r0 as registry.aleo/register.future;

finalize register:
    input r0 as address.public;
    set true into users[r0];

function unregister:
    async unregister self.caller into r0;
    output r0 as registry.aleo/unregister.future;

finalize unregister:
    input r0 as address.public;
    set false into users[r0];
""", errors = "", warnings = "" },
    { initial_ast = "c6961c7b70fb87a56e44c31d0dc98a21924f0ba72b5cebb9badd6836b5eab56e", unrolled_ast = "21f33567aead60ed3037dd490141df3dfa2ee05e7a14c3cf5a3abc5ca4f4bbea", ssa_ast = "ba4d3bd725c6e1bd7dece1e1060bef90d0be8ff4ec591159c362dde060c6a985", flattened_ast = "780255bdf48d2ac9634b7508a7c6cc4ada99bb31f15253e45747754893859e91", destructured_ast = "37f6a702c0e203c8c43d1fcd99c388e8d8b60d87d88de188466eb4831c5c9270", inlined_ast = "1943445a5211abbe077581b224de718435dab4bb379d634ab00877cdf1dbc465", dce_ast = "1943445a5211abbe077581b224de718435dab4bb379d634ab00877cdf1dbc465", bytecode = """
import registry.aleo;
program relay.aleo;

record message:
    owner as address.private;
    data as u8.private;

mapping users:
    key as address.public;
    value as boolean.public;

function send:
    input r0 as address.private;
    input r1 as u8.private;
    cast r0 r1 into r2 as message.record;
    async send r0 into r3;
    output r2 as message.record;
    output r3 as relay.aleo/send.future;

finalize send:
    input r0 as address.public;
    get registry.aleo/users[r0] into r1;
    assert.eq r1 true;

function send_without_check:
    input r0 as address.private;
    input r1 as u8.private;
    cast r0 r1 into r2 as message.record;
    async send_without_check r0 into r3;
    output r2 as message.record;
    output r3 as relay.aleo/send_without_check.future;

finalize send_without_check:
    input r0 as address.public;
    get.or_use registry.aleo/users[r0] true into r1;
    assert.eq r1 true;
""", errors = "", warnings = "" },
] }]]
