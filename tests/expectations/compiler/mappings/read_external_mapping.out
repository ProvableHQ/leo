namespace = "Compile"
expectation = "Pass"
outputs = [[{ compile = [
    { initial_ast = "f2aaf1996d382c7333a733e4be37ea93c27a3ec58960af996b9f8645ebd27dcf", unrolled_ast = "f2aaf1996d382c7333a733e4be37ea93c27a3ec58960af996b9f8645ebd27dcf", ssa_ast = "16bbfc985f7b340af00f48be7c87cce9fa9deec2517f8e1e51d0a9b90a54fd52", flattened_ast = "9091062a54493cd216c2a4ce59f313f83f449c033f4da009f461c77c2207cb94", destructured_ast = "b3de4044cfaa0d6aa8b53838586c872baa272dd5657fedf4781418eb871304d1", inlined_ast = "04678c21b7373fb721607098a6a006d39b4a7d062c0913a12012ab055dfdcb83", dce_ast = "04678c21b7373fb721607098a6a006d39b4a7d062c0913a12012ab055dfdcb83", bytecode = """
program registry.aleo;

mapping users:
    key as address.public;
    value as boolean.public;

function register:
    async register self.caller into r0;
    output r0 as registry.aleo/register.future;

finalize register:
    input r0 as address.public;
    set true into users[r0];

function unregister:
    async unregister self.caller into r0;
    output r0 as registry.aleo/unregister.future;

finalize unregister:
    input r0 as address.public;
    set false into users[r0];
""", errors = "", warnings = "" },
    { initial_ast = "c6961c7b70fb87a56e44c31d0dc98a21924f0ba72b5cebb9badd6836b5eab56e", unrolled_ast = "21f33567aead60ed3037dd490141df3dfa2ee05e7a14c3cf5a3abc5ca4f4bbea", ssa_ast = "ba4d3bd725c6e1bd7dece1e1060bef90d0be8ff4ec591159c362dde060c6a985", flattened_ast = "6b64201c034fd2ee8a5d241d85270f935ba213e5ff0aef6cab65f6e76142efc9", destructured_ast = "0a9a796d86e69fb5a1a43f322b6edcd142581d388014c0aaa60bc0ea509bf7bc", inlined_ast = "7fd6d22831ebbbdde39c8cfb6f50efb048cedb915940df4e3e029461fc62823c", dce_ast = "7fd6d22831ebbbdde39c8cfb6f50efb048cedb915940df4e3e029461fc62823c", bytecode = """
import registry.aleo;
program relay.aleo;

record message:
    owner as address.private;
    data as u8.private;

mapping users:
    key as address.public;
    value as boolean.public;

function send:
    input r0 as address.private;
    input r1 as u8.private;
    cast r0 r1 into r2 as message.record;
    async send r0 into r3;
    output r2 as message.record;
    output r3 as relay.aleo/send.future;

finalize send:
    input r0 as address.public;
    get registry.aleo/users[r0] into r1;
    assert.eq r1 true;

function send_without_check:
    input r0 as address.private;
    input r1 as u8.private;
    cast r0 r1 into r2 as message.record;
    async send_without_check r0 into r3;
    output r2 as message.record;
    output r3 as relay.aleo/send_without_check.future;

finalize send_without_check:
    input r0 as address.public;
    get.or_use registry.aleo/users[r0] true into r1;
    assert.eq r1 true;
""", errors = "", warnings = "" },
] }]]
