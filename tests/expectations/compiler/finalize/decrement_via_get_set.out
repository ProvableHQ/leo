DCE_ENABLED:
program test.aleo;

mapping amounts:
    key as address.public;
    value as u128.public;

function decrease_self:
    input r0 as u128.private;
    async decrease_self self.caller r0 into r1;
    output r1 as test.aleo/decrease_self.future;

finalize decrease_self:
    input r0 as address.public;
    input r1 as u128.public;
    get.or_use amounts[r0] 0u128 into r2;
    sub r2 r1 into r3;
    set r3 into amounts[r0];

DCE_DISABLED:
program test.aleo;

mapping amounts:
    key as address.public;
    value as u128.public;

function decrease_self:
    input r0 as u128.private;
    async decrease_self self.caller r0 into r1;
    output r1 as test.aleo/decrease_self.future;

finalize decrease_self:
    input r0 as address.public;
    input r1 as u128.public;
    get.or_use amounts[r0] 0u128 into r2;
    sub r2 r1 into r3;
    set r3 into amounts[r0];
