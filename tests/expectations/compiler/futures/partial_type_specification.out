namespace = "Compile"
expectation = "Pass"
outputs = [[{ compile = [
    { initial_ast = "45b4bbd869c1958119ade6ae26c3bfa1a679aa9c793156fd3e8bbd0a7bcb1f28", unrolled_ast = "45b4bbd869c1958119ade6ae26c3bfa1a679aa9c793156fd3e8bbd0a7bcb1f28", ssa_ast = "2679e74c4f80439136f4d21a8b2aa538741fae858b1fd25a7c74c02795392bab", flattened_ast = "a72efa491151a150df9d651cf3ef629932a1966006864283c816ee88d29f9c77", destructured_ast = "c2a2dd0a53e6f0414d7676564ceb4f1b71da9cd83fdb166fd289f443bfe1cbd6", inlined_ast = "ef547499da1bb3f438112636ab6991e529e74893623a22ed5968363083e9ae22", dce_ast = "75c6b68a3ffd0503f8a6dc5822aab5785a01a534929a19fc4375128eb05a9aba", bytecode = """
program test_dep.aleo;

record yeets:
    owner as address.private;
    val as u32.private;

mapping Yo:
    key as u32.public;
    value as u32.public;

function main_dep:
    input r0 as u32.private;
    async main_dep r0 1u32 into r1;
    cast self.caller 1u32 into r2 as yeets.record;
    output r2 as yeets.record;
    output r1 as test_dep.aleo/main_dep.future;

finalize main_dep:
    input r0 as u32.public;
    input r1 as u32.public;
    set r1 into Yo[r0];

function main_dep_2:
    input r0 as u32.private;
    async main_dep_2 into r1;
    cast self.caller 1u32 into r2 as yeets.record;
    output r2 as yeets.record;
    output r1 as test_dep.aleo/main_dep_2.future;

finalize main_dep_2:
    set 1u32 into Yo[1u32];
""", errors = "", warnings = "" },
    { initial_ast = "c0f39d94c142ca45fc6f4d18542a524f4652d4c48c2383438bcaa69737400d62", unrolled_ast = "6d125db2d940733a1de80c4956547abd69ba7f5a17e97eaf9c794b7bcf61f188", ssa_ast = "7679f7230c9b4ddf06fc4b67d652bfe255593a72962fffb97597606b29336ea8", flattened_ast = "2b937d1dbb373a87a409adc857b4d21b44e04534a50506d5468f2e8f2001237d", destructured_ast = "a142c58e2d9ec7fa4256348fd40d4dfa6add3c6d24b83008bea95c5766a94984", inlined_ast = "5e603655b39f058fe21dd92336d08a0f0a6c5dbdc7127e4821b0454f1f50bc1f", dce_ast = "64b02bc84d08313b7ea471ff6acbc2bf0e2e883c7e91acd1057e34b222abac66", bytecode = """
import test_dep.aleo;
program test.aleo;

mapping ayo:
    key as u32.public;
    value as u32.public;

function main:
    input r0 as u32.private;
    call test_dep.aleo/main_dep 10u32 into r1 r2;
    call test_dep.aleo/main_dep 1u32 into r3 r4;
    async main r2 r4 1u32 into r5;
    add r2[0u32] r4[0u32] into r6;
    add r6 1u32 into r7;
    add r7 r2[0u32] into r8;
    mul r2[0u32] 2u32 into r9;
    add r8 r9 into r10;
    output r10 as u32.private;
    output r5 as test.aleo/main.future;

finalize main:
    input r0 as test_dep.aleo/main_dep.future;
    input r1 as test_dep.aleo/main_dep.future;
    input r2 as u32.public;
    is.eq r2 1u32 into r3;
    branch.eq r3 false to end_then_0_0;
    await r0;
    await r1;
    branch.eq true true to end_otherwise_0_1;
    position end_then_0_0;
    position end_otherwise_0_1;
    is.eq r2 2u32 into r4;
    branch.eq r4 false to end_then_0_2;
    set 1u32 into ayo[1u32];
    branch.eq true true to end_otherwise_0_3;
    position end_then_0_2;
    position end_otherwise_0_3;
    add r0[0u32] r1[0u32] into r5;
    set r5 into ayo[1u32];
""", errors = "", warnings = """
Warning [WSAZ0374000]: Not all paths through the function await all futures. 2/4 paths contain at least one future that is never awaited.
    --> compiler-test:17:5
     |
  17 |     async function finalize_main(f: Future, f2: Future, a: u32) {
  18 |         // f.await();
  19 |         if a == 1u32 {
  20 |             Future::await(f);
  21 |             f2.await();
  22 |         }
  23 | 
  24 |         if a == 2u32 {
  25 |             //f2.await();
  26 |             Mapping::set(ayo, 1u32, 1u32);
  27 |         }
  28 | 
  29 |         let total: u32 = f.0 + f2.0;
  30 |         Mapping::set(ayo, 1u32, total);
  31 |     }
     |     ^
     |
     = Ex: `f.await()` to await a future. Remove this warning by including the `--disable-conditional-branch-type-checking` flag.""" },
    { initial_ast = "104ffd5e2fcd7ace2f69888b8044b419d2afbf63a8a0be177298af148a44dc71", unrolled_ast = "ce6ef5c1d9e3814a74916d52898dc04da44a7e6ec821a14334f33af25dec5358", ssa_ast = "dfd9d5cf93adf57af13f5fa72dde9c16b299e160c36bf90ecb27976b5edc26ea", flattened_ast = "e195d84d3f66e03083a2b44d9c70cf8300a48346d313a6ac0e4c59ba03c2b097", destructured_ast = "521013d79dbb085c53cc527b3b404f8b53096bbff9cf208f09b72d3408e14984", inlined_ast = "547592f3d3e3020cb372ce7d37f9f310ef0eea61ff03e116fafca4808f86556f", dce_ast = "3afb2321a5f8c107b0b338888368ad7f084a0fe7f481242c782c11fbbf9384cb", bytecode = """
import test_dep.aleo;
import test.aleo;
program wrapper.aleo;

function main:
    input r0 as u32.public;
    input r1 as u32.private;
    call test.aleo/main 1u32 into r2 r3;
    call test.aleo/main 1u32 into r4 r5;
    call test.aleo/main 1u32 into r6 r7;
    async main r3 r5 r7 into r8;
    output r2 as u32.private;
    output r8 as wrapper.aleo/main.future;

finalize main:
    input r0 as test.aleo/main.future;
    input r1 as test.aleo/main.future;
    input r2 as test.aleo/main.future;
    await r0;
    await r1;
    await r2;
""", errors = "", warnings = "" },
    { initial_ast = "6f872345b18b9f1b127eda1666ad59c95072a6fe62f058183c6c873e7227f89f", unrolled_ast = "a239340e8afa331c2d9074054577b750d3b833b1c42cc9c8e1d7bb51ff86ce02", ssa_ast = "7ffec757fe3731621cbbe94efb8dddecee45ac0ee4417341bb1c18c2a9010d16", flattened_ast = "4ba2feb952de93b77a514ecb4ee5ecdf774287fd756ad40a8329084e93ed0220", destructured_ast = "05093c5535af68c4f110c23168eae78145da8ce03c18a26d2b1822ba6aa3c8f3", inlined_ast = "52ddfb55c956b330d5b900396154ddfdc3d8bbc81edea3f7ebf6c89dd75b333d", dce_ast = "cbeddcf4121ea9def530d168a3f3b7f912e9cc163ee7011b9cd3a382284e2345", bytecode = """
import test_dep.aleo;
import test.aleo;
import wrapper.aleo;
program big_wrapper.aleo;

function main:
    input r0 as u32.public;
    input r1 as u32.private;
    call wrapper.aleo/main 10u32 10u32 into r2 r3;
    async main r3 into r4;
    output r4[0u32][0u32][0u32][0u32] as u32.private;
    output r4 as big_wrapper.aleo/main.future;

finalize main:
    input r0 as wrapper.aleo/main.future;
    await r0;
""", errors = "", warnings = "" },
] }]]
