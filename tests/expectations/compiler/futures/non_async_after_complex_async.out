DCE_ENABLED:
program inner.aleo;

mapping foo:
    key as u32.public;
    value as u32.public;

function inner:
    input r0 as u32.private;
    async inner r0 into r1;
    output r1 as inner.aleo/inner.future;

finalize inner:
    input r0 as u32.public;
    set r0 into foo[0u32];
// --- Next Program --- //
import inner.aleo;
program mid.aleo;

function mid:
    input r0 as u32.private;
    call inner.aleo/inner 0u32 into r1;
    call inner.aleo/inner 1u32 into r2;
    async mid r2 r1 into r3;
    output r3 as mid.aleo/mid.future;

finalize mid:
    input r0 as inner.aleo/inner.future;
    input r1 as inner.aleo/inner.future;
    await r0;
    await r1;

function dummy:
// --- Next Program --- //
import inner.aleo;
import mid.aleo;
program outer.aleo;

function outer:
    input r0 as u32.private;
    call mid.aleo/mid 0u32 into r1;
    call mid.aleo/mid 1u32 into r2;
    call mid.aleo/dummy;
    async outer r1 r2 into r3;
    output r3 as outer.aleo/outer.future;

finalize outer:
    input r0 as mid.aleo/mid.future;
    input r1 as mid.aleo/mid.future;
    await r0;
    await r1;

DCE_DISABLED:
program inner.aleo;

mapping foo:
    key as u32.public;
    value as u32.public;

function inner:
    input r0 as u32.private;
    async inner r0 into r1;
    output r1 as inner.aleo/inner.future;

finalize inner:
    input r0 as u32.public;
    set r0 into foo[0u32];
// --- Next Program --- //
import inner.aleo;
program mid.aleo;

function mid:
    input r0 as u32.private;
    call inner.aleo/inner 0u32 into r1;
    call inner.aleo/inner 1u32 into r2;
    async mid r2 r1 into r3;
    output r3 as mid.aleo/mid.future;

finalize mid:
    input r0 as inner.aleo/inner.future;
    input r1 as inner.aleo/inner.future;
    await r0;
    await r1;

function dummy:
// --- Next Program --- //
import inner.aleo;
import mid.aleo;
program outer.aleo;

function outer:
    input r0 as u32.private;
    call mid.aleo/mid 0u32 into r1;
    call mid.aleo/mid 1u32 into r2;
    call mid.aleo/dummy;
    async outer r1 r2 into r3;
    output r3 as outer.aleo/outer.future;

finalize outer:
    input r0 as mid.aleo/mid.future;
    input r1 as mid.aleo/mid.future;
    await r0;
    await r1;
