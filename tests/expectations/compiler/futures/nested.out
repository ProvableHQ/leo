namespace = "Compile"
expectation = "Pass"
outputs = [[{ compile = [
    { initial_ast = "328918d0b3dd6923b30d9ce7404976121e3dd96f32210e9fb514726faef7c2ef", unrolled_ast = "328918d0b3dd6923b30d9ce7404976121e3dd96f32210e9fb514726faef7c2ef", ssa_ast = "a29765973d8c7313f07a01152b5581c3a4a3c1267884e05a7fa16baf4d7eda9a", flattened_ast = "05bafd18d629e278768fec4822d37248cd589e8f59c75bf78ad582537883f14a", destructured_ast = "6699cd507df88cf03996fac9461d68507a638ead5f1fde0b327c9be668a7c098", inlined_ast = "964a923aac955f9e4ed02b83039a2a9a15b1c032ebba4d67fb2b0f7f594f2cf7", dce_ast = "7434eac776cd709525f3151805e13aad89c61840b4b63ea73c4bc0e35c878bbd", bytecode = """
program test_dep.aleo;

record yeets:
    owner as address.private;
    val as u32.private;

mapping Yo:
    key as u32.public;
    value as u32.public;

function main_dep:
    input r0 as u32.private;
    async main_dep r0 1u32 into r1;
    cast self.caller 1u32 into r2 as yeets.record;
    output r2 as yeets.record;
    output r1 as test_dep.aleo/main_dep.future;

finalize main_dep:
    input r0 as u32.public;
    input r1 as u32.public;
    set r1 into Yo[r0];
""", errors = "", warnings = "" },
    { initial_ast = "64089bd9ecc0ab9ce224328c7ba9b2ece577f585b2417b48eb0883ec8cec304c", unrolled_ast = "87332400b418ba69369868f3dc23ffc308ba69c8d74bf825fd8da32c7e00be6d", ssa_ast = "0ce0a7467c76051fc71ac74315909d6cd9a663cb9247dab9099d0bd42e81c0fe", flattened_ast = "83f9e5b1c8f84184dd6463ce879339b2cb8e1b8a3227f0082a2525b8ac0663ad", destructured_ast = "59a628b450623e750cbf4e9c98ec998b4cf15f8783a1cc1e55bf49574958d132", inlined_ast = "4afee3c7f0d246dd87a44bf9a6af5fa9425d3c24d30175938bc4bf0d810249a1", dce_ast = "0e0a3ade5fe2b818835eca534fc08512baa0fb447f1b701507d528ea13f0b272", bytecode = """
import test_dep.aleo;
program test.aleo;

mapping ayo:
    key as u32.public;
    value as u32.public;

function main:
    input r0 as u32.private;
    call test_dep.aleo/main_dep 10u32 into r1 r2;
    call test_dep.aleo/main_dep 1u32 into r3 r4;
    async main r2 r4 1u32 into r5;
    add r2[0u32] r4[0u32] into r6;
    add r6 1u32 into r7;
    add r7 r2[0u32] into r8;
    mul r2[0u32] 2u32 into r9;
    add r8 r9 into r10;
    output r10 as u32.private;
    output r5 as test.aleo/main.future;

finalize main:
    input r0 as test_dep.aleo/main_dep.future;
    input r1 as test_dep.aleo/main_dep.future;
    input r2 as u32.public;
    is.eq r2 1u32 into r3;
    branch.eq r3 false to end_then_0_0;
    await r0;
    await r1;
    branch.eq true true to end_otherwise_0_1;
    position end_then_0_0;
    position end_otherwise_0_1;
    is.eq r2 2u32 into r4;
    branch.eq r4 false to end_then_0_2;
    set 1u32 into ayo[1u32];
    branch.eq true true to end_otherwise_0_3;
    position end_then_0_2;
    position end_otherwise_0_3;
    add r0[0u32] r1[0u32] into r5;
    set r5 into ayo[1u32];
""", errors = "", warnings = """
Warning [WSAZ0374000]: Not all paths through the function await all futures. 2/4 paths contain at least one future that is never awaited.
    --> compiler-test:17:5
     |
  17 |     async function finalize_main(f: Future, f2: Future, a: u32) {
  18 |         // f.await();
  19 |         if a == 1u32 {
  20 |             Future::await(f);
  21 |             f2.await();
  22 |         }
  23 | 
  24 |         if a == 2u32 {
  25 |             //f2.await();
  26 |             Mapping::set(ayo, 1u32, 1u32);
  27 |         }
  28 | 
  29 |         let total: u32 = f.0 + f2.0;
  30 |         Mapping::set(ayo, 1u32, total);
  31 |     }
     |     ^
     |
     = Ex: `f.await()` to await a future. Remove this warning by including the `--disable-conditional-branch-type-checking` flag.""" },
    { initial_ast = "05de2b0dcfd85ec6446f4507492e26b2093e771f44c497f92a24d6fff5e8c864", unrolled_ast = "f40986b029b7e164fd6587b25a06c8c8db90cc0cc73016ff9e04f50c9ac264a0", ssa_ast = "67bb7ad18e91eac296c02c3eca94935c70d19c577cb363cf8a57334b1501d8d4", flattened_ast = "1a7ff0c7d776afa36780863506570a1d2ef6712f6cf83a6a67a8ff16e334ba6f", destructured_ast = "90155bb4e6739a2c7e2a572cecb26e57bf13b07fc2e5354d84128511960fb6e7", inlined_ast = "bd27f8f6f458d931b89facba361524ea060f84f7615368738e2d63bcb676c109", dce_ast = "af8b8cfd061e5152bc4efe0be8611d20f8ec6a1e6acf7f628c79cfb489e2c9f3", bytecode = """
import test_dep.aleo;
import test.aleo;
program wrapper.aleo;

function main:
    input r0 as u32.public;
    input r1 as u32.private;
    call test.aleo/main 1u32 into r2 r3;
    call test.aleo/main 1u32 into r4 r5;
    call test.aleo/main 1u32 into r6 r7;
    async main r3 r5 r7 into r8;
    output r2 as u32.private;
    output r8 as wrapper.aleo/main.future;

finalize main:
    input r0 as test.aleo/main.future;
    input r1 as test.aleo/main.future;
    input r2 as test.aleo/main.future;
    await r0;
    await r1;
    await r2;
""", errors = "", warnings = "" },
    { initial_ast = "bf4f5dac2e3cac6f6c8b117a93b7bc9a4b9d31f66b3b0d946866da23003e6a69", unrolled_ast = "669f4addea17babaa6505d92144a4ec1673b84528c3a5d598247241271e9c87b", ssa_ast = "5374009a0e414802bfbc907b702dbf825a940ada055260b210a6d4267eb301a1", flattened_ast = "ec321772ff7b41fb6b21892ce6d2e5e567f4509ef8b5e191ba2c79e246189c85", destructured_ast = "7762454985bfa4ba8c9880a898cc4a1864eb59b484d3f3ca1a182f9d6570ff61", inlined_ast = "7560f89ad019aff4589853effca021b745a1cf709621ae93c2de54dd0d0cb51e", dce_ast = "d23e8bc31fd33f81e8a18bda85b15316ca4216e6baf546d1ce1f64055c33d22c", bytecode = """
import test_dep.aleo;
import test.aleo;
import wrapper.aleo;
program big_wrapper.aleo;

function main:
    input r0 as u32.public;
    input r1 as u32.private;
    call wrapper.aleo/main 10u32 10u32 into r2 r3;
    async main r3 into r4;
    output r4[0u32][0u32][0u32][0u32] as u32.private;
    output r4 as big_wrapper.aleo/main.future;

finalize main:
    input r0 as wrapper.aleo/main.future;
    await r0;
""", errors = "", warnings = "" },
] }]]
